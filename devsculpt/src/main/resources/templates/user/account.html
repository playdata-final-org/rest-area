<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="UTF-8">
    <title>Devsculpt</title>
    <link href="/assets/css/account.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

    <!-- Font Awesome 아이콘 CSS 추가 -->
    <script th:inline="javascript">
        var devId = /*[[${session.user != null ? session.user.devId : ''}]]*/;
    </script>
</head>

<body>
<div th:replace="layout/header"></div>

<!-- 사이드바 메뉴 -->
<div class="sidebar">
    <p>
        내 계정
    </p>
    <a th:href="@{'/dev/mypage/user/' + ${devId}}" class="menu-item"><i class="fas fa-user"></i>프로필</a>
    <a th:href="@{'/dev/account/' + ${devId}}" class="menu-item active"><i class="fas fa-cogs"></i>계정관리</a>
</div>

<div class="container">
    <div class="user-page">
        <h2>계정삭제</h2>
        <!-- 계정삭제 페이지에 동의 체크박스 추가 -->
        <div class="withdraw-info">
            <p>
                회원 탈퇴일로부터 계정과 닉네임을 포함한 계정 정보(아이디/이메일/닉네임)는
                개인정보 보호방침에 따라 60일간 보관(잠김)되며, 60일 경과된 후에는 모든 개인 정보는
                완전히 삭제되며 더 이상 복구할 수 없게 됩니다.
            </p>
            <label>
                <input type="checkbox" id="agreeCheckbox" onchange="toggleWithdrawButton()"> 계정 삭제에 관한 정책을 읽고 이에 동의합니다.
            </label>
        </div>

        <!-- 계정 탈퇴 버튼을 비활성화 상태로 초기화 -->
        <form th:action="@{'/dev/deleteAccount/' + ${devId}}" method="post">
            <button type="submit" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#withdrawModal" id="withdrawButton" disabled>
                회원 탈퇴
            </button>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function toggleWithdrawButton() {
        var agreeCheckbox = document.getElementById('agreeCheckbox');
        var withdrawButton = document.getElementById('withdrawButton');

        withdrawButton.disabled = !agreeCheckbox.checked;
    }
</script>

</body>

</html>